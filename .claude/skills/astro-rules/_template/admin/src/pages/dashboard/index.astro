---
/**
 * ダッシュボード画面
 * 現在のコンテンツ状況を一覧表示
 */

import AuthLayout from '../../layouts/AuthLayout.astro';
import SampleImagePreview from '../../components/SampleImagePreview.astro';
import SampleImageTextPreview from '../../components/SampleImageTextPreview.astro';
import OgpPreview from '../../components/OgpPreview.astro';
import type { Env, SampleImageContent, SampleImageTextContent, OgpContent } from '../../lib/types';
import { getContent } from '../../lib/r2';

const env = Astro.locals.runtime.env as Env;

// コンテンツを取得
const sampleImageContent = await getContent<SampleImageContent>(env, 'sample-image');
const sampleImageTextContent = await getContent<SampleImageTextContent>(env, 'sample-image-text');
const ogpContent = await getContent<OgpContent>(env, 'ogp');
---

<AuthLayout title="ダッシュボード">
  <div class="space-y-6">
    <h2 class="text-xl font-bold text-gray-800">コンテンツ管理</h2>

    <div class="grid gap-6 md:grid-cols-2">
      <SampleImagePreview content={sampleImageContent} />
      <SampleImageTextPreview content={sampleImageTextContent} />
    </div>

    <h2 class="text-xl font-bold text-gray-800 mt-8 mb-4">サイト設定</h2>

    <div class="grid gap-6 md:grid-cols-2">
      <OgpPreview content={ogpContent} />
    </div>
  </div>
</AuthLayout>
